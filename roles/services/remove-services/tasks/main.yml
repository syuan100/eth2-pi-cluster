- name: Delete geth service config file
  file:
    path: /var/lib/rancher/k3s/server/manifests/geth-service.yaml
    state: absent
  when: external_eth1 == true
  retries: 3
  delay: 5

- name: Delete geth deployment
  shell: kubectl delete deployment --selector=app=geth
  when: external_eth1 == true
  retries: 3
  delay: 5

- name: Delete lighthouse-beacon service config file
  file:
    path: /var/lib/rancher/k3s/server/manifests/lighthouse-beacon-service.yaml
    state: absent
  when: deploy_lighthouse_beacon == false
  retries: 3
  delay: 5

- name: Delete lighthouse-beacon deployment
  shell: kubectl delete deployment --selector=app=lighthouse-beacon
  when: deploy_lighthouse_beacon == false
  retries: 3
  delay: 5

- name: Delete lighthouse-validator service config file
  file:
    path: /var/lib/rancher/k3s/server/manifests/lighthouse-validator-service.yaml
    state: absent
  when: deploy_lighthouse_validator == false
  retries: 3
  delay: 5

- name: Delete lighthouse-validator deployment
  shell: kubectl delete deployment --selector=app=lighthouse-validator
  when: deploy_lighthouse_validator == false
  retries: 3
  delay: 5

- name: Delete lighthouse-validator service config file
  file:
    path: /var/lib/rancher/k3s/server/manifests/teku-service.yaml
    state: absent
  when: deploy_lighthouse_validator == false
  retries: 3
  delay: 5

- name: Delete teku-beacon-validator deployment
  shell: kubectl delete deployment --selector=app=teku
  when: deploy_teku_beacon_w_validator == false
  retries: 3
  delay: 5